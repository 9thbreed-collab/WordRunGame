---
phase: 02-core-puzzle-loop
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/resources/word_pair.gd
  - scripts/resources/level_data.gd
  - data/levels/test_level_01.tres
  - scripts/autoloads/event_bus.gd
autonomous: true

must_haves:
  truths:
    - "WordPair custom resource is defined with word_a and word_b exported string fields"
    - "LevelData custom resource is defined with level_name, time_limit_seconds, and word_pairs array"
    - "A test level .tres file exists with 15 compound word pairs (12 base + 3 bonus)"
    - "EventBus has new signals: word_completed, level_completed, level_failed, letter_input"
  artifacts:
    - path: "scripts/resources/word_pair.gd"
      provides: "WordPair class definition"
    - path: "scripts/resources/level_data.gd"
      provides: "LevelData class definition referencing WordPair"
    - path: "data/levels/test_level_01.tres"
      provides: "A concrete loadable test level with 15 word pairs"
    - path: "scripts/autoloads/event_bus.gd"
      provides: "Gameplay signals for word_completed, level_completed, level_failed, letter_input"
  key_links:
    - from: "scripts/resources/level_data.gd"
      to: "scripts/resources/word_pair.gd"
      via: "word_pairs array typed as Array[WordPair]"
---

<objective>
Establish the data model for all puzzle content (WordPair, LevelData) and the core communication signals (EventBus) needed for the gameplay loop. By creating these resources and signals first, all subsequent components can be built on a stable, shared foundation.

Output: WordPair and LevelData resource classes, a test level with 15 real compound word pairs, and 4 new EventBus signals.
</objective>

<execution_context>
@/Users/nathanielgiddens/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nathanielgiddens/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/02-core-puzzle-loop/02-RESEARCH.md
@.planning/STATE.md
@.planning/ROADMAP.md
@scripts/autoloads/event_bus.gd
@scripts/resources/feature_flags.gd
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WordPair and LevelData resources</name>
  <files>
    scripts/resources/word_pair.gd
    scripts/resources/level_data.gd
  </files>
  <action>
    Create WordPair resource class:
    1. Create `scripts/resources/word_pair.gd`
    2. Define `class_name WordPair extends Resource`
    3. Add `@export var word_a: String = ""` (the clue word, displayed to player)
    4. Add `@export var word_b: String = ""` (the answer word, player types this)

    Create LevelData resource class:
    1. Create `scripts/resources/level_data.gd`
    2. Define `class_name LevelData extends Resource`
    3. Add `@export var level_name: String = ""`
    4. Add `@export var time_limit_seconds: int = 180`
    5. Add `@export var word_pairs: Array[WordPair] = []`
    6. First 12 entries = base words, last 3 = bonus words (indices 12-14)
  </action>
  <verify>
    1. scripts/resources/word_pair.gd exists with class_name WordPair, extends Resource, two @export String vars
    2. scripts/resources/level_data.gd exists with class_name LevelData, extends Resource, typed Array[WordPair]
  </verify>
  <done>
    - WordPair and LevelData custom resource classes defined
    - Both are usable in Godot editor inspector
  </done>
</task>

<task type="auto">
  <name>Task 2: Create test level data and update EventBus</name>
  <files>
    data/levels/test_level_01.tres
    scripts/autoloads/event_bus.gd
  </files>
  <action>
    Create test level data:
    1. Create directory `data/levels/` if it doesn't exist
    2. Create `data/levels/test_level_01.tres` as a LevelData resource
    3. Set level_name = "Test Level 1", time_limit_seconds = 180
    4. Populate word_pairs with 15 WordPair sub-resources using real compound words:
       Base words (12):
       - (sea, shell), (key, board), (foot, ball), (birth, day)
       - (air, plane), (book, worm), (sun, flower), (rail, road)
       - (space, ship), (down, load), (over, flow), (under, ground)
       Bonus words (3):
       - (super, star), (black, hole), (high, light)

    Update EventBus:
    1. Open scripts/autoloads/event_bus.gd
    2. Add a new section `# --- Gameplay signals ---` after the feature flag signals
    3. Add these signals:
       - `signal word_completed(word_index: int)`
       - `signal level_completed`
       - `signal level_failed`
       - `signal letter_input(letter: String, correct: bool)`
  </action>
  <verify>
    1. data/levels/test_level_01.tres exists and is a valid LevelData resource with 15 word pairs
    2. event_bus.gd contains all 4 new signals with correct signatures
  </verify>
  <done>
    - Test level resource file created with 15 compound word pairs
    - EventBus updated with gameplay signals
  </done>
</task>

</tasks>

<verification>
Requirements validated by this plan:
- PUZL-03: Test level uses real compound word pairs (seashell, keyboard, football, etc.)
- PUZL-07: Test level contains exactly 12 base + 3 bonus = 15 word pairs
</verification>

<success_criteria>
1. WordPair resource defined in scripts/resources/word_pair.gd
2. LevelData resource defined in scripts/resources/level_data.gd with Array[WordPair]
3. data/levels/test_level_01.tres exists with 15 populated word pairs
4. EventBus has word_completed, level_completed, level_failed, letter_input signals
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-puzzle-loop/02-01-SUMMARY.md`
</output>

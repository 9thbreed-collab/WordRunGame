# Plan 03-03: Animation Polish
Phase: 3 -- Game Feel, Surge, Score, and Audio
Depends on: 03-01, 03-02

## Context References
- scripts/ui/letter_slot.gd
- scripts/ui/word_row.gd
- scripts/ui/surge_bar.gd (created in 03-01)
- scripts/screens/gameplay_screen.gd

## Tasks

### Task 1: Letter Pop-in Animation
**Files:** Modify scripts/ui/letter_slot.gd
**Steps:**
1. In set_letter(), after setting the text, add a scale tween:
   - Set pivot_offset to center of the slot (custom_minimum_size / 2)
   - scale = Vector2.ZERO
   - Tween to Vector2.ONE over 0.2s with TRANS_BACK, EASE_OUT (pop effect)
2. Add a bool parameter or check to skip animation on reveal (reveal_all/reveal_first_letter should not pop)
3. The pop should feel snappy -- fast in, slight overshoot, settle

### Task 2: Word Completion Celebration
**Files:** Modify scripts/ui/word_row.gd
**Steps:**
1. In _mark_all_correct(), after setting all slots to CORRECT state:
   - Create a tween on the WordRow
   - Briefly scale up to Vector2(1.05, 1.05) over 0.1s
   - Scale back to Vector2.ONE over 0.15s with EASE_OUT
   - Optional: modulate flash to brighter green then back
2. Each LetterSlot could also do a staggered pop (each slot scales with a slight delay)
   - Use tween.tween_interval() for stagger between slots

### Task 3: Surge Bar Animations
**Files:** Modify scripts/ui/surge_bar.gd
**Steps:**
1. On threshold cross (EventBus.surge_threshold_crossed):
   - Pulse scale to Vector2(1.08, 1.08) then back with TRANS_SINE
   - Brief color flash on the bar (modulate to brighter then back)
   - Set pivot_offset to center for correct scaling
2. On surge fill (each word completion):
   - The bar value tween already handles smooth fill
   - Add a brief glow/pulse on the filled portion
3. On imminent state: bar pulses rhythmically (looping tween with subtle scale oscillation)

### Task 4: Bust Dramatic Sequence
**Files:** Modify scripts/screens/gameplay_screen.gd, Modify scripts/ui/surge_bar.gd
**Steps:**
1. On EventBus.surge_bust in GameplayScreen:
   - Flash a full-screen ColorRect red (alpha 0 -> 0.3 -> 0 over 0.4s)
   - Add the ColorRect to gameplay_screen.tscn (hidden by default, above all content)
2. On bust in SurgeBar:
   - Bar flashes red (modulate tween)
   - Bar drains to zero with visible animation
3. Optional: brief screen shake via offsetting the main container
4. The bust sequence should feel dramatic but not interrupt gameplay flow for more than ~0.5s

### Task 5: Scroll Advance Polish
**Files:** Modify scripts/screens/gameplay_screen.gd
**Steps:**
1. Review scroll tween parameters -- currently TRANS_CUBIC over 0.4s
2. Ensure scroll animation doesn't conflict with surge bar or score updates
3. Verify the scroll still feels smooth with the additional UI elements (surge bar, score)
4. No changes expected unless testing reveals issues

## Verification
- Letters pop in with a satisfying scale animation when typed
- Completing a word triggers a celebration animation on the word row
- Surge bar pulses when crossing thresholds
- Bust produces a dramatic multi-element sequence (bar drain + screen flash)
- All animations feel cohesive and don't interfere with gameplay input
- Animations don't cause frame drops on target hardware

## Decisions
- 03-03-D1: Tweens for all animations (no AnimationPlayer needed at this stage)
- 03-03-D2: Letter pop skipped on reveal (only user-typed letters pop)
- 03-03-D3: Bust sequence is brief (~0.5s) to avoid frustrating gameplay interruption
- 03-03-D4: Staggered letter celebration adds polish without complexity
